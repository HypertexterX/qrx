<!DOCTYPE html><app></app><script>$Q="querySelectorAll",C="CONTEXT",D=document,F="files",GI="getItem",H=history,IH="innerHTML",L=localStorage,O="os",ONS="onsuccess",P=Promise,R="root",RS="replaceState",S="SYSTEM",SI="setItem",TC="textContent",UR="USER_REQUEST",W=window,WL=W.location;class OS{constructor(){this[R]=D[$Q]("app")[0],this.$={},W.addEventListener("hashchange",()=>this.R()),this.boot(this)}async boot(t){await t.cdb(t),await t.b(t),await t.R(t)}cdb(t){return new P((e,r)=>{let a,o=indexedDB.open(O,1);o.onupgradeneeded=t=>{a=t.target.result,a.objectStoreNames.contains(F)||a.createObjectStore(F)},o[ONS]=r=>{t.db=r.target.result,e()},o.onerror=r})}tx(t,e="readonly"){return t.db.transaction(F,e).objectStore(F)}async write(t,e,r){return new P(a=>t.tx(t,"readwrite").put(r,e)[ONS]=a)}async read(t,e){return new P(r=>t.tx(t).get(e)[ONS]=t=>r(t.target.result))}async getKeys(t){return new P(e=>t.tx(t).getAllKeys()[ONS]=t=>e(t.target.result))}use(t,e,r){t.$[e]=r,"function"==typeof r&&r(t)}async b(t){let e,r=(await t.getKeys(t)).filter(t=>t.startsWith("boot")).sort();for(let a of r){e=await t.read(t,a);try{new Function(O,e)(t)}catch(t){console.error(`[Boot Error] ${a}:`,t)}}}async R(t){let e,r,a,o=WL.hash.slice(1)||"home",[s,n]=o.split("?"),i=new URLSearchParams(n);i.has("w")&&(await t.write(t,s,i.get("w")),H[RS](null,"",`#${s}`)),e=["k","m","s"];for(let t of e)i.has(t)&&(L[SI](t,i.get(t)),i.delete(t),H[RS](null,"",`#${i.toString()?`${s}?${i.toString()}`:s}`));if(r=L[GI]("k"),i.has("p"))return r?void await t.g(t,s,L[GI]("s"),r,L[GI]("m"),WL.href):void t.r(t,"missing api key");a=await t.read(t,s),t.r(t,a||"")}r(t,e){t[R][IH]=e,t.RS(t,t[R])}RS(t,e){e[$Q]("script").forEach(t=>{let e=D.createElement("script");Array.from(t.attributes).forEach(t=>{e.setAttribute(t.name,t.value)}),e[TC]=t[TC],t.parentNode.replaceChild(e,t)})}async g(t,e,r,a,o,s){t[R][IH]="Thinking...";let n,i,c,l,d,h,w,g,u,p=await t.read(t,e)||"",$={contents:[{parts:[{text:`<${S}>${r}</${S}><${C}>${p}</${C}><${UR}>${s}</${UR}>`}]}]};try{if(n=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${o}:streamGenerateContent?key=${a}&alt=sse`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)}),!n.ok)throw i=await n.text(),new Error(`API Error ${n.status}: ${i}`);for(c=n.body.getReader(),de=new TextDecoder,b="",fT="";({done:l,value:d}=await c.read()),!l;)for(w of(b+=de.decode(d,{stream:!0}),h=b.split("\n"),b=h.pop(),h))if(w.startsWith("data: "))try{g=JSON.parse(w.slice(6)),u=g.candidates?.[0]?.content?.parts?.[0]?.text,u&&(fT+=u,t[R][IH]=fT)}catch(i){}await t.write(t,e,fT),t.RS(t,t[R]),H[RS](null,"",`#${e}`)}catch(e){t[R][IH]=`${e.message}`}}}os=new OS</script>